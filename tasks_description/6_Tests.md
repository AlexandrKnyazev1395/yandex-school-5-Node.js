# Задание №4 - Тесты.

## 1. Модульные тесты

### Используемые модули
Для запуска модульных тестов используется комманда npm run test.
Она запускает приблуду `mocha`, которая нужна для выполнения unit-тестирования. 

Помогает в тестировании модуль `chai`, который предоставляет множество полезных утилит для тестирования: глубокое сравнение объектов, подробный логгинг ошибок и т.д.

Также используется модуль `sinon` для тестирования роутов приложения.


### Реализованные тесты
Реализованные Unit-тесты расположены в [test/unitTests/](../test/unitTests).

Реализована проверка функций получения коммитов, получения веток и получения исходников, расположенных в папке [cliTools/git](../cliTools/git). Также реализована проверка роута, отдающего пользователю страницу с контентом файла. [routes/file.js](../routes/file.js)



## 2. Интеграционные тесты

### Используемые модули
Для запуска модульных тестов используются глобально установленные модули `selenium standalone server` и `hermione`.  Первый предоставляет локально развернутый сервер для запуска браузеров в среде ОС и проведения с ними операций с помощью команд ПО. `Hermione` предоставляет набор готовых утилит для работы с развернутым с помощью standalone браузером. Также используется модуль `cherio`, который позволяет парсить html-строки, эмулируя реальные dom-объекты и работать с ними в стиле, похожем на jquery.

Для запуска можно использовать команду `npm run i-test`.

### Реализованные тесты
Реализована проверка нескольких сценариев работы с приложением:

  1. Открытие страницы. Проверяется, что при открытии страницы отображается правильный Title в браузере. [test/integrationTests/](../test/integrationTests/1_pageOpening.js)

  2. Работа главной страницы: 
   - **Отображается непустой список веток**: проверяется, что на странице имеется не пустой элемент-список с классом .branches-list.
   - **Каждый элемент списка веток содержит название ветки, ссылку на комиты и ссылку на исходники**: Проверяется, что каждый элемент списка веток представляет из себя элемент `<li>`, внутри которого присутствует текст-название ветки, ссылка на коммиты этой ветки и ссылка на исходники этйо ветки. Для этого "полезная часть" ссылок должна начинаться с `sources/{имя ветки}` и `commits/{имя ветки}` соответственно.

  3. Работа страницы с комитами: 
   - **Отображается непустой список комитов**: проверяется, что на странице имеется не пустой элемент-список с классом .commits-list.
   - **Каждый элемент списка содержит хэш комита c сылкой на исходиники + остальную информацию**: Проверяется, что каждый элемент списка коммитов представляет из себя элемент `<li>`, внутри которого присутствует текст-хэш коммита, являющийся ссылкой на исходники этого коммита и текст с доп. информацией. 
  4. Работа страницы с исходниками: 
   - **Отображается непустой список исходников**: проверяется, что на странице имеется не пустой элемент-список с классом .sources-list.
   - **Элементы списка - ссылки либо на исходники либо на просмотр файла**: Проверяется, что каждый элемент списка коммитов является ссылкой ведущей либо к просмотру файла, либо к просмотру папки. Условие: "полезная часть" ссылок должна начинаться с /file или с sources/
   - **Отображается "хлебная крошка"**: на странице присустствует элемент с классом `.breadcump`
   - **"Хлебная крошка" работает корректно**: проверяется, что если из папки client перейти на два уровня выше, пользователь перейдет на нужную страницу.
   - **"Работает переход в папки**: проверяется, что если кликнуть по первому элементу списка папок (папка bin), то utl будет корректным (отвечать трубованию пути для папки, т.е. начинается с sources/ и содержит параметр ?path)

   P.S. Не успеваю сделать больше тестов и написать нормальное README, прошу прощения).





